<!doctype html>
<html lang="en" class="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prompt Builder</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      ::-webkit-scrollbar {
        width: 5px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #555;
      }
    </style>
  </head>
  <body
    class="bg-bkg text-content flex flex-col h-screen overflow-hidden font-['Inter']"
  >
    <header
      class="flex items-center justify-between px-4 py-2 bg-secondary border-b border-gray-200 dark:border-gray-700 shadow-sm"
    >
      <div class="flex items-center gap-3">
        <span class="material-icons text-primary text-3xl">hub</span>
        <h1 class="text-xl font-bold text-content">Prompt Builder</h1>
      </div>
      <div class="flex items-center gap-4">
        <button
          id="theme-toggle"
          class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"
          title="Toggle dark/light theme"
        >
          <span class="material-icons">dark_mode</span>
        </button>
        <div
          class="w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center font-semibold text-sm"
          title="User"
        >
          U
        </div>
      </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
      <aside
        id="left-sidebar"
        class="w-64 bg-secondary p-4 border-r border-gray-200 dark:border-gray-700 flex flex-col gap-6 overflow-y-auto"
      >
        <div>
          <h2
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"
          >
            Library
          </h2>
          <ul class="space-y-1">
            <li>
              <button
                id="new-prompt-btn"
                class="flex items-center gap-2 p-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 text-sm w-full"
                title="Create a new blank prompt"
              >
                <span class="material-icons text-base">add_circle</span> New
                Prompt
              </button>
            </li>
            <li>
              <button
                id="nav-templates"
                class="flex items-center gap-2 p-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 text-sm w-full"
                title="Manage your saved prompts"
              >
                <span class="material-icons text-base">folder</span> My Prompts
              </button>
            </li>
          </ul>
        </div>
        <div>
          <h2
            class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"
          >
            Block Library
          </h2>
          <div id="block-library" class="grid grid-cols-2 gap-2"></div>
        </div>
      </aside>

      <div id="editor-view" class="flex-1 flex flex-col overflow-hidden">
        <div
          id="no-prompt-view"
          class="hidden flex-1 flex-col items-center justify-center text-center p-8"
        >
          <span class="material-icons text-8xl text-gray-300 dark:text-gray-600"
            >inbox</span
          >
          <h2 class="mt-4 text-2xl font-bold">No Prompt Selected</h2>
          <p class="mt-2 text-gray-500 dark:text-gray-400">
            Select a prompt from "My Prompts" or create a new one to get
            started.
          </p>
        </div>

        <div id="editor-content" class="flex-1 flex overflow-hidden">
          <div id="main-canvas-wrapper" class="flex-1 p-6 overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
              <input
                id="prompt-title-input"
                type="text"
                class="text-2xl font-bold bg-transparent rounded-md -ml-2 px-2 py-1 w-full focus:bg-secondary focus:ring-1 focus:ring-primary"
                value="Untitled Prompt"
                title="Click to rename prompt"
              />
              <button
                id="toggle-preview"
                class="flex-shrink-0 flex items-center gap-2 px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md text-sm hover:bg-secondary"
                title="Toggle Preview Pane"
              >
                <span class="material-icons text-base">visibility</span> Preview
              </button>
            </div>
            <div id="canvas" class="min-h-[50vh] space-y-4">
              <div
                id="canvas-placeholder"
                class="text-center py-20 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"
              >
                <p class="text-gray-500">
                  Drag blocks from the library to start building your prompt.
                </p>
              </div>
            </div>
            <div class="mt-6 text-center">
              <div
                id="add-block-buttons"
                class="flex items-center justify-center gap-2 flex-wrap"
              ></div>
            </div>
          </div>

          <aside
            id="right-preview-pane"
            class="w-1/3 bg-secondary p-4 border-l border-gray-200 dark:border-gray-700 flex-col hidden"
          >
            <div class="flex-1 overflow-y-auto">
              <div class="flex justify-between items-center mb-2">
                <h3 class="font-bold">Assembled Prompt</h3>
                <button
                  class="copy-prompt-btn p-1.5 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600"
                  title="Copy Prompt"
                >
                  <span class="material-icons text-base">content_copy</span>
                </button>
              </div>
              <pre
                id="preview-text"
                class="w-full h-48 p-2 bg-bkg rounded-md whitespace-pre-wrap text-sm font-mono overflow-auto"
              ></pre>
            </div>
          </aside>
        </div>
      </div>

      <div
        id="templates-view"
        class="hidden flex-1 flex-col p-6 lg:p-8 overflow-y-auto"
      >
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-3xl font-bold">My Prompts</h2>
          <div class="flex items-center gap-2">
            <button
              id="import-prompts-btn"
              class="flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm hover:bg-secondary"
              title="Import prompts from a .json file"
            >
              <span class="material-icons text-base">upload_file</span> Import
            </button>
            <input
              type="file"
              id="import-file-input"
              class="hidden"
              accept=".json"
            />
            <button
              id="export-prompts-btn"
              class="flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm hover:bg-secondary"
              title="Export all prompts to a .json file"
            >
              <span class="material-icons text-base">download</span> Export All
            </button>
            <button
              id="back-to-editor-btn"
              class="flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
              title="Return to the prompt editor"
            >
              <span class="material-icons text-base">edit</span> Back to Editor
            </button>
          </div>
        </div>
        <div id="templates-list-container" class="space-y-4"></div>
      </div>
    </div>

    <footer
      id="footer-bar"
      class="flex items-center justify-between px-4 py-2 bg-secondary border-t border-gray-200 dark:border-gray-700 text-sm"
    >
      <div class="flex items-center gap-4 text-gray-600 dark:text-gray-400">
        <div id="stats-counter">
          <span>0 chars / 0 tokens</span>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          id="download-prompt-btn"
          class="flex items-center gap-2 px-4 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600"
          title="Download the current prompt as a .json file"
        >
          <span class="material-icons text-base">download</span> Download
        </button>
        <button
          id="footer-copy-btn"
          class="copy-prompt-btn flex items-center gap-2 px-4 py-1.5 bg-primary text-white rounded-md hover:opacity-90"
          title="Copy the final assembled prompt to your clipboard"
        >
          <span class="material-icons text-base">content_copy</span>
          Copy Prompt
        </button>
      </div>
    </footer>

    <script src="js/utils.js" type="module"></script>
    <script src="js/api.js" type="module"></script>
    <script src="js/state.js" type="module"></script>
    <script src="js/ui.js" type="module"></script>
    <script src="js/events.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
  </body>
</html>